local pb = require "pb"
Global.Protos.Methods = {}

Global.Protos.Methods.Lua2Bytes = function(protoName, protoClass, protoData)
	if protoData == nil then
		return nil
	end

	local protoBytes = ProtosManager:LoadProtoFile("protos/" .. protoName .. ".bytes")
	if protoBytes == nil then Debug.LogError(1) end
	pb.load(protoBytes)
	local data = pb.encode(protoClass, protoData)
	return assert(data)
end

Global.Protos.Methods.Bytes2Lua = function(protoName, protoClass, dataBytes)
	local protoBytes = ProtosManager:LoadProtoFile("protos/" .. protoName .. ".bytes")
	pb.load(protoBytes)
	return pb.decode(protoClass, dataBytes)
end