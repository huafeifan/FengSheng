Global.Data = {}

--用户数据
Global.Data.User = {}
Global.Data.User.UserName = nil

--房间数据
Global.Data.RoomInfo = {}
Global.Data.RoomInfo.RoomNub = nil
Global.Data.RoomInfo.RoomName = nil
Global.Data.RoomInfo.ChairCount = nil
Global.Data.RoomInfo.UserCount = nil
Global.Data.RoomInfo.RobotCount = nil
Global.Data.RoomInfo.ChairsInfo = nil
Global.Data.RoomInfo.GameStage = nil
Global.Data.RoomInfo.InformationStage = nil
Global.Data.RoomInfo.CurrentGameTurnUserName = nil --当前是哪个玩家的回合
Global.Data.RoomInfo.CurrentAskInformationReceivedPlayerName = nil --当前情报传递到哪个玩家
Global.Data.RoomInfo.AskUseShiPo = false  --是否使用识破

Global.Data.User.SetData = function(user)
	Global.Data.User.UserName = user.name
end

Global.Data.User.Clear = function()
	Global.Data.User.UserName = nil
end

Global.Data.RoomInfo.SetRoomInfo = function(roomInfo)
	if roomInfo == nil then
		return
	end
	
	Global.Data.RoomInfo.RoomNub = roomInfo.roomNub
	Global.Data.RoomInfo.RoomName = roomInfo.roomName
	Global.Data.RoomInfo.ChairCount = roomInfo.chairCount
	Global.Data.RoomInfo.UserCount = roomInfo.userCount
	Global.Data.RoomInfo.RobotCount = roomInfo.robotCount
end

Global.Data.RoomInfo.SetChairsInfo = function(chairsInfo)
	Global.Data.RoomInfo.ChairsInfo = chairsInfo
end

Global.Data.RoomInfo.Clear = function()
	Global.Data.RoomInfo.RoomNub = nil
	Global.Data.RoomInfo.RoomName = nil
	Global.Data.RoomInfo.ChairCount = nil
	Global.Data.RoomInfo.UserCount = nil
	Global.Data.RoomInfo.RobotCount = nil
	Global.Data.RoomInfo.ChairsInfo = nil
	Global.Data.RoomInfo.GameStage = nil
	Global.Data.RoomInfo.InformationStage = nil
	Global.Data.RoomInfo.CurrentGameTurnUserName = nil
	Global.Data.RoomInfo.CurrentInformationTransmitUserName = nil
	Global.Data.RoomInfo.CurrentInformationResponseUserName = nil
	Global.Data.RoomInfo.CanUseShiPo = false
end

Global.Data.RoomInfo.SetGameStage = function(stage, data)
	Debug.Log(stage)
	if stage == GameStage.WaitCharacterChoose then
		Global.Data.RoomInfo.GameStage = GameStage.WaitCharacterChoose
		EventManager:TriggerEvent(Global.Event.GameStage.WaitCharacterChoose, data)
	elseif stage == GameStage.WaitDealCards then
		Global.Data.RoomInfo.GameStage = GameStage.WaitDealCards
		EventManager:TriggerEvent(Global.Event.GameStage.WaitDealCards, data)
	elseif stage == GameStage.WaitGameTurn then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameTurn
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameTurn, data)
	elseif stage == GameStage.WaitGameTurnOpertateEnd then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameTurnOpertateEnd
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameTurnOpertateEnd, data)
	elseif stage == GameStage.WaitIdentityChoose then
		Global.Data.RoomInfo.GameStage = GameStage.WaitIdentityChoose
		EventManager:TriggerEvent(Global.Event.GameStage.WaitIdentityChoose, data)
	elseif stage == GameStage.WaitGameStart then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameStart
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameStart, data)
	elseif stage == GameStage.WaitGameTurnStart then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameTurnStart
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameTurnStart, data)
	elseif stage == GameStage.WaitGameTurnDealCards then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameTurnDealCards
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameTurnDealCards, data)
	elseif stage == GameStage.WaitGameTurnDisCard then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameTurnDisCard
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameTurnDisCard, data)
	elseif stage == GameStage.WaitGameTurnEnd then
		Global.Data.RoomInfo.GameStage = GameStage.WaitGameTurnEnd
		EventManager:TriggerEvent(Global.Event.GameStage.WaitGameTurnEnd, data)
	elseif stage == GameStage.WaitOtherPlayHandCard then
		Global.Data.RoomInfo.GameStage = GameStage.WaitOtherPlayHandCard
		EventManager:TriggerEvent(Global.Event.GameStage.WaitOtherPlayHandCard, data)
	end
end

Global.Data.RoomInfo.SetInformationStage = function(stage, data)
	Debug.Log(stage)
	if stage == InformationStage.WaitStart then
		Global.Data.RoomInfo.InformationStage = InformationStage.WaitStart
		EventManager:TriggerEvent(Global.Event.InformationStage.WaitStart, data)
	elseif stage == InformationStage.WaitInformationDeclaration then
		Global.Data.RoomInfo.InformationStage = InformationStage.WaitInformationDeclaration
		EventManager:TriggerEvent(Global.Event.InformationStage.WaitInformationDeclaration, data)
	elseif stage == InformationStage.WaitInformationTransmit then
		Global.Data.RoomInfo.InformationStage = InformationStage.WaitInformationTransmit
		EventManager:TriggerEvent(Global.Event.InformationStage.WaitInformationTransmit, data)
	elseif stage == InformationStage.WaitInformationReceive then
		Global.Data.RoomInfo.InformationStage = InformationStage.WaitInformationReceive
		EventManager:TriggerEvent(Global.Event.InformationStage.WaitInformationReceive, data)
	elseif stage == InformationStage.WaitEnd then
		Global.Data.RoomInfo.InformationStage = InformationStage.WaitEnd
		EventManager:TriggerEvent(Global.Event.InformationStage.WaitEnd, data)
	end
end