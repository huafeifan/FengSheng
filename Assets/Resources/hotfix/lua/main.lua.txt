function PreLoadSprite(list, index, onComplete)
	ResourcesManager:LoadSpriteAsync(list[index], function()
		if index == #list then
			local data = {}
			data.tips = "success"
			data.progress = 1
			EventManager:TriggerEvent(CS.FengSheng.EventManager.Event_LoadingProgress, data);
			onComplete()
		else
			index = index + 1
			local data = {}
			data.tips = "正在加载资源..."
			data.progress = index / (#list)
			EventManager:TriggerEvent(CS.FengSheng.EventManager.Event_LoadingProgress, data);
			PreLoadSprite(list, index, onComplete)
		end
	end)
end

function PreLoad(onComplete)
	local data = {}
	data.tips = "正在加载资源..."
	data.progress = 0
	EventManager:TriggerEvent(CS.FengSheng.EventManager.Event_LoadingProgress, data);
	
	local loadPrefabs = { }
	table.insert(loadPrefabs, Global.NormalTipPrefab_Path)
	table.insert(loadPrefabs, Global.NetworkWaitingPrefab_Path)
	
	local loadSprites = { } 
	for i = 1, #Global.Resources.Rule_Introduce do
		table.insert(loadSprites, Global.Resources.Rule_Introduce[i])
	end
	for i = 1, #Global.Resources.Rule_Base do
		table.insert(loadSprites, Global.Resources.Rule_Base[i])
	end
	for i = 1, #Global.Resources.Rule_Base do
		table.insert(loadSprites, Global.Resources.Rule_Role[i])
	end
	
	local loadedCount = 0--已加载资源数量
	local loadSunCount = (#loadPrefabs) + (#loadSprites)
	for i = 1, #loadPrefabs do
		UIManager:LoadUI(loadPrefabs[i], true)
		
		loadedCount = loadedCount + 1
		data.progress = loadedCount / loadSunCount
		EventManager:TriggerEvent(CS.FengSheng.EventManager.Event_LoadingProgress, data);
	end
	
	PreLoadSprite(loadSprites, 1, onComplete)
	
end


PreLoad(function()
	UIManager:OpenUI(Global.LoginPrefab_Path)
end)
